(function(n){n.widget("ui.combobox",{_create:function(){var t,f=this,i=this.element.hide(),r=i.children(":selected"),e=r.val()?r.text():"",u=this.wrapper=n("<span>").addClass("ui-combobox").insertAfter(i);t=n("<input>").appendTo(u).val(e).addClass("ui-state-default ui-combobox-input").autocomplete({delay:0,minLength:0,source:function(t,r){var u=new RegExp(n.ui.autocomplete.escapeRegex(t.term),"i");r(i.children("option").map(function(){var i=n(this).text();if(this.value&&(!t.term||u.test(i)))return{label:i.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+n.ui.autocomplete.escapeRegex(t.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1<\/strong>"),value:i,option:this}}))},select:function(n,t){t.item.option.selected=!0,f._trigger("selected",n,{item:t.item.option})},change:function(r,u){if(!u.item){var e=new RegExp("^"+n.ui.autocomplete.escapeRegex(n(this).val())+"$","i"),f=!1;if(i.children("option").each(function(){if(n(this).text().match(e))return this.selected=f=!0,!1}),!f)return n(this).val(""),i.val(""),t.data("autocomplete").term="",!1}}}).addClass("ui-widget ui-widget-content ui-corner-left"),t.data("autocomplete")._renderItem=function(t,i){return n("<li><\/li>").data("item.autocomplete",i).append("<a>"+i.label+"<\/a>").appendTo(t)},n("<a>").attr("tabIndex",-1).attr("title","Show All Items").appendTo(u).button({icons:{primary:"ui-icon-triangle-1-s"},text:!1}).removeClass("ui-corner-all").addClass("ui-corner-right ui-combobox-toggle").click(function(){if(t.autocomplete("widget").is(":visible")){t.autocomplete("close");return}n(this).blur(),t.autocomplete("search",""),t.focus()})},destroy:function(){this.wrapper.remove(),this.element.show(),n.Widget.prototype.destroy.call(this)}})})(jQuery)