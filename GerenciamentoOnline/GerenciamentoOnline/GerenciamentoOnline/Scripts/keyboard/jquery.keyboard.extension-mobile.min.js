(function(n){n.fn.addMobile=function(t){var i,r={container:{theme:"a"},buttonMarkup:{theme:"a",shadow:"true",corners:"true"},buttonHover:{theme:"c"},buttonAction:{theme:"b"},buttonActive:{theme:"e"}};return this.each(function(){var u=n(this).data("keyboard");u&&typeof n.fn.textinput!="undefined"&&(u.mobile_options=i=n.extend({},r,t),u.mobile_initialized=!1,u.mobile_init=function(){n(".ui-keyboard-input").textinput(),u.options.alwaysOpen&&u.isVisible&&u.mobile_setup(),u.$el.bind("visible.keyboard",function(){u.mobile_initialized!==!0&&u.mobile_setup()})},u.mobile_setup=function(){var t,r=n.extend({},i.buttonMarkup,i.buttonAction);u.$keyboard.addClass("ui-bar ui-bar-"+i.container.theme).removeClass("ui-widget ui-widget-content").find("button:not(."+u.options.css.buttonAction+")").addClass(u.modButton(i.buttonMarkup)).end().find("."+u.options.css.buttonAction).addClass(u.modButton(r)).end().find("button").removeClass("ui-corner-all ui-state-default").hover(function(){n(this).addClass("ui-btn-hover-"+i.buttonHover.theme)},function(){n(this).removeClass("ui-btn-hover-"+i.buttonHover.theme)}),u.options.css.buttonAction="ui-btn-down-"+i.buttonActive.theme,u.msie&&u.$preview[0]!==u.el&&(u.$preview.hide(),u.$keyboard.css("width",""),u.width=u.$keyboard.outerWidth(),u.$keyboard.width(u.width+parseInt(u.$preview.css("fontSize"),10)),u.$preview.width(u.width),u.$preview.show()),t=u.options.position,t.of=t.of||u.$el.data("keyboardPosition")||u.$el,t.collision=u.options.usePreview?t.collision||"fit fit":"flip flip",u.$keyboard.position(t),u.mobile_initialized=!0},u.modButton=function(n){return"ui-btn ui-btn-up-"+n.theme+(n.shadow=="true"?" ui-shadow":"")+(n.corners=="true"?" ui-btn-corner-all":"")},u.mobile_init())})}})(jQuery)