(function(n){"use strict";n.keyboard=function(t,i){var r=this,u;r.$el=n(t),r.el=t,r.$el.data("keyboard",r),r.init=function(){r.options=u=n.extend(!0,{},n.keyboard.defaultOptions,i),r.shiftActive=r.altActive=r.metaActive=r.sets=r.capsLock=!1,r.lastKeyset=[!1,!1,!1],r.rows=["","-shift","-alt","-alt-shift"],r.acceptedKeys=[],r.mappedKeys={},n('<!--[if lte IE 8]><script>jQuery("body").addClass("oldie");<\/script><![endif]--><!--[if IE]><script>jQuery("body").addClass("ie");<\/script><![endif]-->').appendTo("body").remove(),r.msie=n("body").hasClass("oldie"),r.allie=n("body").hasClass("ie"),r.inPlaceholder=r.$el.attr("placeholder")||"",r.watermark=typeof document.createElement("input").placeholder!="undefined"&&r.inPlaceholder!=="",r.regex=n.keyboard.comboRegex,r.decimal=/^\./.test(u.display.dec)?!0:!1,r.repeatTime=1e3/(u.repeatRate||20),u.preventDoubleEventTime=u.preventDoubleEventTime||100,r.isOpen=!1,r.temp=n('<input style="position:absolute;left:-9999em;top:-9999em;" type="text" value="testing">').appendTo("body").caret(3,3),r.checkCaret=u.lockInput||r.temp.hide().show().caret().start!==3?!0:!1,r.temp.remove(),r.lastCaret={start:0,end:0},r.temp=["",0,0],n.each("initialized beforeVisible visible hidden canceled accepted beforeClose".split(" "),function(t,i){n.isFunction(u[i])&&r.$el.bind(i+".keyboard",u[i])}),u.alwaysOpen&&(u.stayOpen=!0),n(document).bind("mousedown keyup touchstart checkkeyboard".split(" ").join(".keyboard "),function(t){if(!r.opening&&(r.escClose(t),t.target&&n(t.target).hasClass("ui-keyboard-input"))){var i=n(t.target).data("keyboard");i&&i.options.openOn&&i.focusOn()}}),r.$el.addClass("ui-keyboard-input "+u.css.input).attr({"aria-haspopup":"true",role:"textbox"}),(r.$el.is(":disabled")||r.$el.attr("readonly")&&!r.$el.hasClass("ui-keyboard-lockedinput"))&&r.$el.addClass("ui-keyboard-nokeyboard"),u.openOn&&r.$el.bind(u.openOn+".keyboard",function(){r.focusOn()}),r.watermark||r.$el.val()!==""||r.inPlaceholder===""||r.$el.attr("placeholder")===""||r.$el.addClass("ui-keyboard-placeholder").val(r.inPlaceholder),r.$el.trigger("initialized.keyboard",[r,r.el]),u.alwaysOpen&&r.reveal()},r.setCurrent=function(){n(".ui-keyboard-has-focus").removeClass("ui-keyboard-has-focus"),n(".ui-keyboard-input-current").removeClass("ui-keyboard-input-current"),r.$el.addClass("ui-keyboard-input-current"),r.$keyboard.addClass("ui-keyboard-has-focus"),r.isCurrent(!0),r.isOpen=!0},r.isCurrent=function(t){var i=n.keyboard.currentKeyboard||!1;return t?i=n.keyboard.currentKeyboard=r.el:t===!1&&i===r.el&&(i=n.keyboard.currentKeyboard=""),i===r.el},r.isVisible=function(){return typeof r.$keyboard=="undefined"?!1:r.$keyboard.is(":visible")},r.focusOn=function(){u.usePreview&&r.$el.is(":visible")&&(r.lastCaret=r.$el.caret()),r.isVisible()||(clearTimeout(r.timer),r.reveal()),u.alwaysOpen&&r.setCurrent()},r.reveal=function(){var f,t,e;if(r.opening=!0,n(".ui-keyboard").not(".ui-keyboard-always-open").hide(),r.$el.is(":disabled")||r.$el.attr("readonly")&&!r.$el.hasClass("ui-keyboard-lockedinput")){r.$el.addClass("ui-keyboard-nokeyboard");return}return r.$el.removeClass("ui-keyboard-nokeyboard"),u.openOn&&r.$el.unbind(u.openOn+".keyboard"),typeof r.$keyboard=="undefined"&&r.startup(),r.watermark||r.el.value!==r.inPlaceholder||r.$el.removeClass("ui-keyboard-placeholder").val(""),r.originalContent=r.$el.val(),r.$preview.val(r.originalContent),u.acceptValid&&r.checkValid(),r.position=u.position,r.position.of=r.position.of||r.$el.data("keyboardPosition")||r.$el,r.position.collision=r.position.collision||(u.usePreview?"fit fit":"flip flip"),u.resetDefault&&(r.shiftActive=r.altActive=r.metaActive=!1,r.showKeySet()),r.$keyboard.css({position:"absolute",left:0,top:0}),r.$el.trigger("beforeVisible.keyboard",[r,r.el]),r.setCurrent(),r.$keyboard.show(),u.usePreview&&r.msie&&(typeof r.width=="undefined"&&(r.$preview.hide(),r.width=Math.ceil(r.$keyboard.width()),r.$preview.show()),r.$preview.width(r.width)),n.ui.position&&r.$keyboard.position(r.position),u.initialFocus&&r.$preview.focus(),r.checkDecimal(),r.lineHeight=parseInt(r.$preview.css("lineHeight"),10)||parseInt(r.$preview.css("font-size"),10)+4,u.caretToEnd&&(t=r.originalContent.length,r.lastCaret={start:t,end:t}),r.allie&&(t=r.lastCaret.start||r.originalContent.length,f={start:t,end:t},r.lastCaret||(r.lastCaret=f),r.lastCaret.end===0&&r.lastCaret.start>0&&(r.lastCaret.end=r.lastCaret.start),r.lastCaret.start<0&&(r.lastCaret=f)),setTimeout(function(){r.opening=!1,u.initialFocus&&r.$preview.caret(r.lastCaret.start,r.lastCaret.end),r.$el.trigger("visible.keyboard",[r,r.el])},10),i.layout=="qwerty"?(n(".ui-keyboard").addClass("ui-keyboard_qwerty"),e=n("#pesqProduto").offset().top,n(".ui-keyboard").css("top",e+50)):n(".ui-keyboard").removeClass("ui-keyboard_qwerty"),r},r.startup=function(){n.isFunction(u.create)&&(r.$keyboard=u.create(r)),typeof r.$keyboard=="undefined"&&(r.$keyboard=r.buildKeyboard()),r.preview=r.$preview[0],r.$decBtn=r.$keyboard.find(".ui-keyboard-dec"),r.wheel=n.isFunction(n.fn.mousewheel),r.alwaysAllowed=[20,33,34,35,36,37,38,39,40,45,46],(u.enterNavigation||r.el.tagName==="TEXTAREA")&&r.alwaysAllowed.push(13),r.bindKeyboard(),u.appendLocally?r.$el.after(r.$keyboard):r.$keyboard.appendTo("body"),r.bindKeys(),n(window).bind("resize.keyboard",function(){r.isVisible()&&r.$keyboard.position(r.position)})},r.bindKeyboard=function(){r.$preview.unbind("keypress keyup keydown mouseup touchend ".split(" ").join(".keyboard ")).bind("keypress.keyboard",function(t){var i=r.lastKey=String.fromCharCode(t.charCode||t.which);if(r.$lastKey=[],r.checkCaret&&(r.lastCaret=r.$preview.caret()),r.capsLock=i>=65&&i<=90&&!t.shiftKey||i>=97&&i<=122&&t.shiftKey?!0:!1,u.restrictInput){if((t.which===8||t.which===0)&&n.inArray(t.keyCode,r.alwaysAllowed))return;n.inArray(i,r.acceptedKeys)===-1&&t.preventDefault()}else if((t.ctrlKey||t.metaKey)&&(t.which===97||t.which===99||t.which===118||t.which>=120&&t.which<=122))return;r.hasMappedKeys&&r.mappedKeys.hasOwnProperty(i)&&(r.lastKey=r.mappedKeys[i],r.insertText(r.lastKey),t.preventDefault()),r.checkMaxLength()}).bind("keyup.keyboard",function(t){switch(t.which){case 9:if(r.tab&&u.tabNavigation&&!u.lockInput){r.shiftActive=t.shiftKey;var i=n.keyboard.keyaction.tab(r);if(r.tab=!1,!i)return!1}else t.preventDefault();break;case 27:return r.close(),!1}clearTimeout(r.throttled),r.throttled=setTimeout(function(){r.isVisible()&&r.checkCombos()},100),r.checkMaxLength(),n.isFunction(u.change)&&u.change(n.Event("change"),r,r.el),r.$el.trigger("change.keyboard",[r,r.el])}).bind("keydown.keyboard",function(t){switch(t.which){case 9:return u.tabNavigation?(r.tab=!0,!1):(r.tab=!0,!1);case 13:n.keyboard.keyaction.enter(r,null,t);break;case 20:r.shiftActive=r.capsLock=!r.capsLock,r.showKeySet(this);break;case 86:if(t.ctrlKey||t.metaKey){if(u.preventPaste){t.preventDefault();return}r.checkCombos()}}}).bind("mouseup.keyboard touchend.keyboard",function(){r.checkCaret&&(r.lastCaret=r.$preview.caret())}),r.$keyboard.bind("mousedown.keyboard click.keyboard touchstart.keyboard",function(t){t.stopPropagation(),r.isCurrent()||(r.reveal(),n(document).trigger("checkkeyboard.keyboard"))}),u.preventPaste&&(r.$preview.bind("contextmenu.keyboard",function(n){n.preventDefault()}),r.$el.bind("contextmenu.keyboard",function(n){n.preventDefault()}))},r.bindKeys=function(){var t=(u.keyBinding+" repeater mouseenter mouseleave touchstart mousewheel mouseup click ").split(" ").join(".keyboard ")+"mouseleave mousedown touchstart touchend touchmove touchcancel ".split(" ").join(".kb ");r.$allKeys=r.$keyboard.find("button.ui-keyboard-button").unbind(t).bind(u.keyBinding.split(" ").join(".keyboard ")+".keyboard repeater.keyboard",function(t){if(!r.$keyboard.is(":visible"))return!1;var e,i=n.data(this,"key"),f=i.action.split(":")[0],o=(new Date).getTime();if(!(o-(r.lastEventTime||0)<u.preventDoubleEventTime)){if(r.lastEventTime=o,r.$preview.focus(),r.$lastKey=n(this),r.lastKey=i.curTxt,r.checkCaret&&r.$preview.caret(r.lastCaret.start,r.lastCaret.end),f.match("meta")&&(f="meta"),n.keyboard.keyaction.hasOwnProperty(f)&&n(this).hasClass("ui-keyboard-actionkey")){if(n.keyboard.keyaction[f](r,this,t)===!1)return!1}else typeof i.action!="undefined"&&(e=r.lastKey=r.wheel&&!n(this).hasClass("ui-keyboard-actionkey")?i.curTxt:i.action,r.insertText(e),r.capsLock||u.stickyShift||t.shiftKey||(r.shiftActive=!1,r.showKeySet(this)));r.$preview.focus().caret(r.lastCaret.start,r.lastCaret.end),r.checkCombos(),r.checkMaxLength(),n.isFunction(u.change)&&u.change(n.Event("change"),r,r.el),r.$el.trigger("change.keyboard",[r,r.el]),t.preventDefault()}}).bind("mouseenter.keyboard mouseleave.keyboard touchstart.keyboard",function(t){if(r.isCurrent()){var o=this,f=n(this),i=n.data(o,"key"),e=i.layers||r.getLayers(f);i.layers=e=n.grep(e,function(t,i){return n.inArray(t,e)===i}),t.type!=="mouseenter"&&t.type!=="touchstart"||r.el.type==="password"||f.hasClass(u.css.buttonDisabled)||f.addClass(u.css.buttonHover).attr("title",function(n,i){return r.wheel&&i===""&&r.sets&&e.length>1&&t.type!=="touchstart"?u.wheelMessage:i}),t.type==="mouseleave"&&(i.curTxt=i.original,i.curNum=0,n.data(o,"key",i),f.removeClass(r.el.type==="password"?"":u.css.buttonHover).attr("title",function(n,t){return t===u.wheelMessage?"":t}).find("span").text(i.original))}}).bind("mousewheel.keyboard",function(t,i){if(r.wheel){var f,e=n(this),u=n.data(this,"key");return f=u.layers||r.getLayers(e),f.length>1?(u.curNum+=i>0?-1:1,u.curNum>f.length-1&&(u.curNum=0),u.curNum<0&&(u.curNum=f.length-1)):u.curNum=0,u.layers=f,u.curTxt=f[u.curNum],n.data(this,"key",u),e.find("span").text(f[u.curNum]),!1}}).bind("mouseup.keyboard mouseleave.kb touchend.kb touchmove.kb touchcancel.kb",function(t){return/(mouseleave|touchend|touchcancel)/.test(t.type)?n(this).removeClass(u.css.buttonHover):(r.isVisible()&&r.isCurrent()&&r.$preview.focus(),r.checkCaret&&r.$preview.caret(r.lastCaret.start,r.lastCaret.end)),r.mouseRepeat=[!1,""],clearTimeout(r.repeater),!1}).bind("click.keyboard",function(){return!1}).not(".ui-keyboard-actionkey").add(".ui-keyboard-tab, .ui-keyboard-bksp, .ui-keyboard-space, .ui-keyboard-enter",r.$keyboard).bind("mousedown.kb touchstart.kb",function(){if(u.repeatRate!==0){var t=n(this);r.mouseRepeat=[!0,t],setTimeout(function(){r.mouseRepeat[0]&&r.mouseRepeat[1]===t&&r.repeatKey(t)},u.repeatDelay)}return!1})},r.insertText=function(n){var u,i,f,e=r.$preview.val(),t=r.$preview.caret(),o=r.$preview.scrollLeft(),h=r.$preview.scrollTop(),s=e.length;t.end<t.start&&(t.end=t.start),t.start>s&&(t.end=t.start=s),r.preview.tagName==="TEXTAREA"&&(r.msie&&e.substr(t.start,1)==="\n"&&(t.start+=1,t.end+=1),f=e.split("\n").length-1,r.preview.scrollTop=f>0?r.lineHeight*f:h),u=n==="bksp"&&t.start===t.end?!0:!1,n=n==="bksp"?"":n,i=t.start+(u?-1:n.length),o+=parseInt(r.$preview.css("fontSize"),10)*(n==="bksp"?-1:1),r.$preview.val(r.$preview.val().substr(0,t.start-(u?1:0))+n+r.$preview.val().substr(t.end)).caret(i,i).scrollLeft(o),r.lastCaret={start:i,end:i}},r.checkMaxLength=function(){var n,t=r.$preview.val();u.maxLength!==!1&&t.length>u.maxLength&&(n=Math.min(r.$preview.caret().start,u.maxLength),r.$preview.val(t.substring(0,u.maxLength)),r.$preview.caret(n,n),r.lastCaret={start:n,end:n}),r.$decBtn.length&&r.checkDecimal()},r.repeatKey=function(n){n.trigger("repeater.keyboard"),r.mouseRepeat[0]&&(r.repeater=setTimeout(function(){r.repeatKey(n)},r.repeatTime))},r.showKeySet=function(n){var t="",i=(r.shiftActive?1:0)+(r.altActive?2:0);if(r.shiftActive||(r.capsLock=!1),r.metaActive?(t=n&&n.name&&/meta/.test(n.name)?n.name:"",t===""?t=r.metaActive===!0?"":r.metaActive:r.metaActive=t,(u.stickyShift||r.lastKeyset[2]===r.metaActive)&&(!(r.shiftActive||r.altActive)||r.$keyboard.find(".ui-keyboard-keyset-"+t+r.rows[i]).length)||(r.shiftActive=r.altActive=!1)):!u.stickyShift&&r.lastKeyset[2]!==r.metaActive&&r.shiftActive&&(r.shiftActive=r.altActive=!1),i=(r.shiftActive?1:0)+(r.altActive?2:0),t=i===0&&!r.metaActive?"-default":t===""?"":"-"+t,!r.$keyboard.find(".ui-keyboard-keyset"+t+r.rows[i]).length){r.shiftActive=r.lastKeyset[0],r.altActive=r.lastKeyset[1],r.metaActive=r.lastKeyset[2];return}r.$keyboard.find(".ui-keyboard-alt, .ui-keyboard-shift, .ui-keyboard-actionkey[class*=meta]").removeClass(u.css.buttonAction).end().find(".ui-keyboard-alt")[r.altActive?"addClass":"removeClass"](u.css.buttonAction).end().find(".ui-keyboard-shift")[r.shiftActive?"addClass":"removeClass"](u.css.buttonAction).end().find(".ui-keyboard-lock")[r.capsLock?"addClass":"removeClass"](u.css.buttonAction).end().find(".ui-keyboard-keyset").hide().end().find(".ui-keyboard-keyset"+t+r.rows[i]).show().end().find(".ui-keyboard-actionkey.ui-keyboard"+t).addClass(u.css.buttonAction),r.lastKeyset=[r.shiftActive,r.altActive,r.metaActive]},r.checkCombos=function(){if(!r.isVisible())return r.$preview.val();var e,s,i,f,t=r.$preview.val(),n=r.$preview.caret(),o=t.length;if(n.end<n.start&&(n.end=n.start),n.start>o&&(n.end=n.start=o),r.msie&&t.substr(n.start,1)==="\n"&&(n.start+=1,n.end+=1),u.useCombos&&(r.msie?t=t.replace(r.regex,function(n,t,i){return u.combos.hasOwnProperty(t)?u.combos[t][i]||n:n}):r.$preview.length&&(i=n.start-(n.start-2>=0?2:0),r.$preview.caret(i,n.end),f=(r.$preview.caret().text||"").replace(r.regex,function(n,t,i){return u.combos.hasOwnProperty(t)?u.combos[t][i]||n:n}),r.$preview.val(r.$preview.caret().replace(f)),t=r.$preview.val())),u.restrictInput&&t!==""){for(i=t,s=r.acceptedKeys.length,e=0;e<s;e++)i!==""&&(f=r.acceptedKeys[e],t.indexOf(f)>=0&&(/[\[|\]|\\|\^|\$|\.|\||\?|\*|\+|\(|\)|\{|\}]/g.test(f)&&(f="\\"+f),i=i.replace(new RegExp(f,"g"),"")));i!==""&&(t=t.replace(i,""))}return n.start+=t.length-o,n.end+=t.length-o,r.$preview.val(t),r.$preview.caret(n.start,n.end),r.preview.scrollTop=r.lineHeight*(t.substring(0,n.start).split("\n").length-1),r.lastCaret={start:n.start,end:n.end},u.acceptValid&&r.checkValid(),t},r.checkValid=function(){var n=!0;u.validate&&typeof u.validate=="function"&&(n=u.validate(r,r.$preview.val(),!1)),r.$keyboard.find(".ui-keyboard-accept")[n?"removeClass":"addClass"]("ui-keyboard-invalid-input")[n?"addClass":"removeClass"]("ui-keyboard-valid-input")},r.checkDecimal=function(){r.decimal&&/\./g.test(r.preview.value)||!r.decimal&&/\,/g.test(r.preview.value)?r.$decBtn.attr({disabled:"disabled","aria-disabled":"true"}).removeClass(u.css.buttonDefault+" "+u.css.buttonHover).addClass(u.css.buttonDisabled):r.$decBtn.removeAttr("disabled").attr({"aria-disabled":"false"}).addClass(u.css.buttonDefault).removeClass(u.css.buttonDisabled)},r.getLayers=function(t){var i;return i=t.attr("data-pos"),t.closest(".ui-keyboard").find('button[data-pos="'+i+'"]').map(function(){return n(this).find("> span").text()}).get()},r.switchInput=function(t,i){if(typeof u.switchInput=="function")u.switchInput(r,t,i);else{r.$keyboard.hide();var o,s=!1,e=n("button, input, textarea, a").filter(":visible"),f=e.index(r.$el)+(t?1:-1);r.$keyboard.show(),f>e.length-1&&(s=u.stopAtEnd,f=0),f<0&&(s=u.stopAtEnd,f=e.length-1),s||(r.close(i),o=e.eq(f).data("keyboard"),o&&o.options.openOn.length?o.focusOn():e.eq(f).focus())}return!1},r.close=function(t){if(r.isOpen){clearTimeout(r.throttled);var i=t?r.checkCombos():r.originalContent;if(t&&u.validate&&typeof u.validate=="function"&&!u.validate(r,i,!0)&&(i=r.originalContent,t=!1,u.cancelClose))return;r.isCurrent(!1),r.isOpen=!1,r.$el.removeClass("ui-keyboard-input-current ui-keyboard-autoaccepted").addClass(t||!1?t===!0?"":"ui-keyboard-autoaccepted":"").trigger(u.alwaysOpen?"":"beforeClose.keyboard",[r,r.el,t||!1]).val(i).scrollTop(r.el.scrollHeight).trigger(t||!1?"accepted.keyboard":"canceled.keyboard",[r,r.el]).trigger(u.alwaysOpen?"inactive.keyboard":"hidden.keyboard",[r,r.el]).blur(),r.$preview.val(i),u.openOn&&(r.timer=setTimeout(function(){r.$el.bind(u.openOn+".keyboard",function(){r.focusOn()}),n(":focus")[0]===r.el&&r.$el.blur()},500)),u.alwaysOpen||r.$keyboard.hide(),r.watermark||r.el.value!==""||r.inPlaceholder===""||r.$el.addClass("ui-keyboard-placeholder").val(r.inPlaceholder),r.$el.trigger("change")}return!!t},r.accept=function(){return r.close(!0)},r.escClose=function(n){if(n&&n.type==="keyup")return n.which===27?r.close():"";r.isOpen&&(!r.isCurrent()&&r.isOpen||r.isOpen&&n.target!==r.el&&!u.stayOpen)&&(r.allie&&n.preventDefault(),r.close(u.autoAccept?"true":!1))},r.keyBtn=n("<button />").attr({role:"button","aria-disabled":"false",tabindex:"-1"}).addClass("ui-keyboard-button"),r.addKey=function(t,i,f){var c,h,l,s,o,e=f===!0?t:u.display[i]||t,a=f===!0?t.charCodeAt(0):t;return/\(.+\)/.test(e)&&(s=e.replace(/\(([^()]+)\)/,""),l=e.match(/\(([^()]+)\)/)[1],e=s,o=s.split(":"),s=o[0]!==""&&o.length>1?o[0]:s,r.mappedKeys[l]=s),o=e.split(":"),o[0]===""&&o[1]===""&&(e=":"),e=o[0]!==""&&o.length>1?n.trim(o[0]):e,c=o.length>1?n.trim(o[1]).replace(/_/g," ")||"":"",h=e.length>1?" ui-keyboard-widekey":"",h+=f?"":" ui-keyboard-actionkey",r.keyBtn.clone().attr({"data-value":e,name:a,"data-pos":r.temp[1]+","+r.temp[2],title:c}).data("key",{action:t,original:e,curTxt:e,curNum:0}).addClass("ui-keyboard-"+a+h+" "+u.css.buttonDefault).html("<span>"+e+"<\/span>").appendTo(r.temp[0])},r.buildKeyboard=function(){var f,t,o,s,h,a,i,e,c,v=0,l=n("<div />").addClass("ui-keyboard "+u.css.container+(u.alwaysOpen?" ui-keyboard-always-open":"")).attr({role:"textbox"}).hide();return u.usePreview?(r.$preview=r.$el.clone(!1).removeAttr("id").removeClass("ui-keyboard-placeholder ui-keyboard-input").addClass("ui-keyboard-preview "+u.css.input).attr("tabindex","-1").show(),n("<div />").addClass("ui-keyboard-preview-wrapper divInpTecladoNumerico").append(r.$preview).appendTo(l)):(r.$preview=r.$el,u.position.at=u.position.at2),u.lockInput&&r.$preview.addClass("ui-keyboard-lockedinput").attr({readonly:"readonly"}),u.layout!=="custom"&&n.keyboard.layouts.hasOwnProperty(u.layout)||(u.layout="custom",n.keyboard.layouts.custom=u.customLayout||{"default":["{cancel}"]}),n.each(n.keyboard.layouts[u.layout],function(y,p){if(y!=="")for(v++,s=n("<div />").attr("name",y).addClass("ui-keyboard-keyset ui-keyboard-keyset-"+y).appendTo(l)[y==="default"?"show":"hide"](),o=0;o<p.length;o++){for(a=n.trim(p[o]).replace(/\{(\.?)[\s+]?:[\s+]?(\.?)\}/g,"{$1:$2}"),e=a.split(/\s+/),i=0;i<e.length;i++)if(r.temp=[s,o,i],h=!1,e[i].length!==0)if(/^\{\S+\}$/.test(e[i])){if(t=e[i].match(/^\{(\S+)\}$/)[1].toLowerCase(),/\!\!/.test(t)&&(t=t.replace("!!",""),h=!0),/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/.test(t)&&(c=parseFloat(t.replace(/,/,".").match(/^sp:((\d+)?([\.|,]\d+)?)(em|px)?$/)[1]||0),n("<span>&nbsp;<\/span>").width(t.match("px")?c+"px":c*2+"em").addClass("ui-keyboard-button ui-keyboard-spacer").appendTo(s)),/^meta\d+\:?(\w+)?/.test(t)){r.addKey(t,t);continue}switch(t){case"a":case"accept":r.addKey("accept",t).addClass(u.css.buttonAction);break;case"alt":case"altgr":r.addKey("alt","alt");break;case"b":case"bksp":r.addKey("bksp",t);break;case"c":case"cancel":r.addKey("cancel",t).addClass(u.css.buttonAction);break;case"combo":r.addKey("combo","combo").addClass(u.css.buttonAction);break;case"dec":r.acceptedKeys.push(r.decimal?".":","),r.addKey("dec","dec");break;case"e":case"enter":r.addKey("enter",t).addClass(u.css.buttonAction);break;case"empty":r.addKey(""," ").addClass(u.css.buttonDisabled).attr("aria-disabled",!0);break;case"s":case"shift":r.addKey("shift",t);break;case"sign":r.acceptedKeys.push("-"),r.addKey("sign","sign");break;case"space":r.acceptedKeys.push(" "),r.addKey("space","space");break;case"t":case"tab":r.addKey("tab",t);break;default:n.keyboard.keyaction.hasOwnProperty(t)&&r.addKey(t,t)[h?"addClass":"removeClass"](u.css.buttonAction)}}else f=e[i],r.acceptedKeys.push(f===":"?f:f.split(":")[0]),r.addKey(f,f,!0);s.find(".ui-keyboard-button:last").after('<br class="ui-keyboard-button-endrow">')}}),v>1&&(r.sets=!0),r.hasMappedKeys=!n.isEmptyObject(r.mappedKeys),l},r.destroy=function(){n(document).unbind("mousedown.keyboard keyup.keyboard touchstart.keyboard"),r.$keyboard&&r.$keyboard.remove();var t=n.trim(u.openOn+" accepted beforeClose canceled change contextmenu hidden initialized keydown keypress keyup visible").split(" ").join(".keyboard ");r.$el.removeClass("ui-keyboard-input ui-keyboard-lockedinput ui-keyboard-placeholder ui-keyboard-notallowed ui-keyboard-always-open "+u.css.input).removeAttr("aria-haspopup").removeAttr("role").unbind(t+".keyboard").removeData("keyboard")},r.init()},n.keyboard.keyaction={accept:function(n){var t=n.options.layout=="qwerty",i=n.preview.value;return n.preview.value=t?i:format(i),n.close(!0),t&&setTimeout(buscaProdutoFiltro(null,!0),400),!1},alt:function(n,t){n.altActive=!n.altActive,n.showKeySet(t)},bksp:function(n){n.insertText("bksp")},cancel:function(n){return n.close(),!1},clear:function(n){n.$preview.val("")},combo:function(n){var t=!n.options.useCombos;return n.options.useCombos=t,n.$keyboard.find(".ui-keyboard-combo").toggleClass(n.options.css.buttonAction,t),t&&n.checkCombos(),!1},dec:function(n){n.insertText(n.decimal?".":",")},"default":function(n,t){n.shiftActive=n.altActive=n.metaActive=!1,n.showKeySet(t)},enter:function(t,i,r){var o=t.options.layout=="qwerty",e=t.preview.value,f,u;if(t.preview.value=o?e:format(e),t.accept(),setTimeout(function(){verificaCliente(!0)},300),f=t.el.tagName,u=t.options,r.shiftKey)return u.enterNavigation?t.switchInput(!r[u.enterMod],!0):t.close(!0);if(u.enterNavigation&&(f!=="TEXTAREA"||r[u.enterMod]))return t.switchInput(!r[u.enterMod],u.autoAccept?"true":!1);f==="TEXTAREA"&&n(r.target).closest("button").length&&t.insertText(" \n")},lock:function(n,t){n.lastKeyset[0]=n.shiftActive=n.capsLock=!n.capsLock,n.showKeySet(t)},left:function(n){var t=n.$preview.caret();t.start-1>=0&&(n.lastCaret={start:t.start-1,end:t.start-1})},meta:function(t,i){t.metaActive=n(i).hasClass(t.options.css.buttonAction)?!1:!0,t.showKeySet(i)},next:function(n){return n.switchInput(!0,n.options.autoAccept),!1},prev:function(n){return n.switchInput(!1,n.options.autoAccept),!1},right:function(n){var t=n.$preview.caret();t.start+1<=n.$preview.val().length&&(n.lastCaret={start:t.start+1,end:t.start+1})},shift:function(n,t){n.lastKeyset[0]=n.shiftActive=!n.shiftActive,n.showKeySet(t)},sign:function(n){/^\-?\d*\.?\d*$/.test(n.$preview.val())&&n.$preview.val(n.$preview.val()*-1)},space:function(n){n.insertText(" ")},tab:function(n){var t=n.el.tagName,i=n.options;if(t==="INPUT")return i.tabNavigation?n.switchInput(!n.shiftActive,!0):!1;n.insertText("\t")}},n.keyboard.layouts={alpha:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} a b c d e f g h i j [ ] \\","k l m n o p q r s ; ' {enter}","{shift} t u v w x y z , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} A B C D E F G H I J { } |",'K L M N O P Q R S : " {enter}',"{shift} T U V W X Y Z < > ? {shift}","{accept} {space} {cancel}"]},qwerty:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {space} {cancel}"]},international:{"default":["` 1 2 3 4 5 6 7 8 9 0 - = {bksp}","{tab} q w e r t y u i o p [ ] \\","a s d f g h j k l ; ' {enter}","{shift} z x c v b n m , . / {shift}","{accept} {alt} {space} {alt} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) _ + {bksp}","{tab} Q W E R T Y U I O P { } |",'A S D F G H J K L : " {enter}',"{shift} Z X C V B N M < > ? {shift}","{accept} {alt} {space} {alt} {cancel}"],alt:["~ ¡ ² ³ ¤ € ¼ ½ ¾ ‘ ’ ¥ × {bksp}","{tab} ä å é ® þ ü ú í ó ö « » ¬","á ß ð f g h j k ø ¶ ´ {enter}","{shift} æ x © v b ñ µ ç > ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"],"alt-shift":["~ ¹ ² ³ £ € ¼ ½ ¾ ‘ ’ ¥ ÷ {bksp}","{tab} Ä Å É ® Þ Ü Ú Í Ó Ö « » ¦","Ä § Ð F G H J K Ø ° ¨ {enter}","{shift} Æ X ¢ V B Ñ µ Ç . ¿ {shift}","{accept} {alt} {space} {alt} {cancel}"]},dvorak:{"default":["` 1 2 3 4 5 6 7 8 9 0 [ ] {bksp}","{tab} ' , . p y f g c r l / = \\","a o e u i d h t n s - {enter}","{shift} ; q j k x b m w v z {shift}","{accept} {space} {cancel}"],shift:["~ ! @ # $ % ^ & * ( ) { } {bksp}",'{tab} " < > P Y F G C R L ? + |',"A O E U I D H T N S _ {enter}","{shift} : Q J K X B M W V Z {shift}","{accept} {space} {cancel}"]},num:{"default":["  ","7 8 9 {b}","4 5 6 {clear}","1 2 3 {c}",", 0 . {a}"]}},n.keyboard.defaultOptions={layout:"qwerty",customLayout:null,position:{of:null,my:"right center",at:"left center",at2:"left center",collision:"none"},usePreview:!0,alwaysOpen:!1,initialFocus:!0,stayOpen:!1,display:{a:"✔:Pronto (Shift-Enter)",accept:"Pronto:Pronto (Shift-Enter)",alt:"Alt:⌥ AltGr",b:"⌫:Apagar último",bksp:"Bksp:Backspace",c:"✖:Cancelar (Esc)",cancel:"Cancelar:Cancelar (Esc)",clear:"C:Limpar",combo:"ö:Toggle Combo Keys",dec:".:Decimal",e:"⏎:Enter",empty:" ",enter:"Enter:Enter ⏎",left:"←",lock:"Lock:⇪ Caps Lock",next:"Next ⇨",prev:"⇦ Prev",right:"→",s:"⇧:Shift",shift:"Shift:Shift",sign:"±:Change Sign",space:"&nbsp;:Espaço",t:"⇥:Tab",tab:"⇥ Tab:Tab"},wheelMessage:"Use a rodinha do mouse para ver outras teclas",css:{input:"ui-widget-content ui-corner-all",container:"ui-widget-content ui-widget ui-corner-all ui-helper-clearfix",buttonDefault:"ui-state-default ui-corner-all",buttonHover:"ui-state-hover",buttonAction:"ui-state-active",buttonDisabled:"ui-state-disabled"},autoAccept:!1,lockInput:!1,restrictInput:!1,acceptValid:!1,cancelClose:!0,tabNavigation:!1,enterNavigation:!1,enterMod:"altKey",stopAtEnd:!0,appendLocally:!1,stickyShift:!0,preventPaste:!1,caretToEnd:!1,maxLength:!1,repeatDelay:500,repeatRate:20,resetDefault:!1,openOn:"focus",keyBinding:"mousedown touchstart",useCombos:!0,combos:{"`":{a:"à",A:"À",e:"è",E:"È",i:"ì",I:"Ì",o:"ò",O:"Ò",u:"ù",U:"Ù",y:"ỳ",Y:"Ỳ"},"'":{a:"á",A:"Á",e:"é",E:"É",i:"í",I:"Í",o:"ó",O:"Ó",u:"ú",U:"Ú",y:"ý",Y:"Ý"},'"':{a:"ä",A:"Ä",e:"ë",E:"Ë",i:"ï",I:"Ï",o:"ö",O:"Ö",u:"ü",U:"Ü",y:"ÿ",Y:"Ÿ"},"^":{a:"â",A:"Â",e:"ê",E:"Ê",i:"î",I:"Î",o:"ô",O:"Ô",u:"û",U:"Û",y:"ŷ",Y:"Ŷ"},"~":{a:"ã",A:"Ã",e:"ẽ",E:"Ẽ",i:"ĩ",I:"Ĩ",o:"õ",O:"Õ",u:"ũ",U:"Ũ",y:"ỹ",Y:"Ỹ",n:"ñ",N:"Ñ"}},validate:function(){return!0}},n.keyboard.comboRegex=/([`\'~\^\"ao])([a-z])/mig,n.keyboard.currentKeyboard="",n.fn.keyboard=function(t){return this.each(function(){n(this).data("keyboard")||new n.keyboard(this,t)})},n.fn.getkeyboard=function(){return this.data("keyboard")}})(jQuery),function(n,t,i,r){"use strict";n.fn.caret=function(n,u){if(typeof this[0]=="undefined"||this.is(":hidden")||this.css("visibility")==="hidden")return this;var o,c,s,v,l,e,a,p,h,y=document.selection,f=this[0],b=f.scrollTop,w=typeof f.selectionStart!="undefined";return typeof n=="number"&&typeof u=="number"&&(c=n,v=u),typeof c!="undefined"?(w?(f.selectionStart=c,f.selectionEnd=v):(l=f.createTextRange(),l.collapse(!0),l.moveStart("character",c),l.moveEnd("character",v-c),l.select()),(this.is(":visible")||this.css("visibility")!=="hidden")&&this.focus(),f.scrollTop=b,this):(w?(o=f.selectionStart,s=f.selectionEnd):f.tagName==="TEXTAREA"?(h=this.val(),e=y[i](),a=e[r](),a.moveToElementText(f),a.setEndPoint("EndToEnd",e),o=a.text.replace(/\r/g,"\n")[t],s=o+e.text.replace(/\r/g,"\n")[t]):(h=this.val().replace(/\r/g,"\n"),e=y[i]()[r](),e.moveEnd("character",h[t]),o=e.text===""?h[t]:h.lastIndexOf(e.text),e=y[i]()[r](),e.moveStart("character",-h[t]),s=e.text[t]),p=(f.value||"").substring(o,s),{start:o,end:s,text:p,replace:function(n){return f.value.substring(0,o)+n+f.value.substring(s,f.value[t])}})}}(jQuery,"length","createRange","duplicate")